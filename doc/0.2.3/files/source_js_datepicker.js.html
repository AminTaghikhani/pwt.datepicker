<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>source\js\datepicker.js - persian-datepicker</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="persian-datepicker"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.2.3</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/ClassDatepicker.html">ClassDatepicker</a></li>
            
                <li><a href="../classes/Config.html">Config</a></li>
            
                <li><a href="../classes/ViewsDatePicker.html">ViewsDatePicker</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: source\js\datepicker.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Datepicker Class
 * @class ClassDatepicker
 * @constructor Datepicker
 */
var ClassDatepicker = {
    /**
     * Update All View&#x27;s Part
     *
     * @method updateAllViews
     * @return Datepicker
     */
    updateAllViews: function () {
        var self = this;
        self.dayPicker.updateView();
        self.monthPicker.updateView();
        self.yearPicker.updateView();
        return self;
    },
    /**
     * Change View
     * @param {String} viewName
     * @method changeView
     * @return Datepicker
     */
    changeView: function (viewName) {
        var self = this;
        self.navigator.switchRelation(viewName);
        self.currentView = viewName;
        switch (viewName) {
            case (&#x27;month&#x27;):
                self.yearPicker.hide();
                self.monthPicker.show();
                self.dayPicker.hide();
                break;
            case (&#x27;year&#x27;):
                self.yearPicker.show();
                self.monthPicker.hide();
                self.dayPicker.hide();
                break;
            case (&#x27;day&#x27;):
                self.yearPicker.hide();
                self.monthPicker.hide();
                self.dayPicker.show();
                break;
        }
        return this;
    },
    /**
     * Use As Flag For Define Self Manipulation
     * @private
     * @property _flagSelfManipulate
     */
    _flagSelfManipulate: true,
    /**
     * selectDate
     * @param {string} key
     * @param {number} unixDate
     * @method selectDate
     * @return Datepicker
     */
    selectDate: function (key, unixDate) {
        var self = this;
        self.state.setSelected(&#x27;unix&#x27;, unixDate);
        this.state.syncViewWithelected();
        switch (self.currentView) {
            case (&#x27;month&#x27;):
                self.monthPicker.selectMonth();
                break;
            case (&#x27;year&#x27;):
                self.yearPicker.selectYear();
                break;
            case (&#x27;day&#x27;):
                self.dayPicker.selectDay();
                break;
        }
        self._updateInputElement();
        self.onSelect(unixDate, this);
        if (self.autoClose) {
            self.element.main.hide();
        }
        return this;
    },
    /**
     * selectMonth
     * @param {number} monthNum
     * @method selectMonth
     * @return Datepicker
     */
    selectMonth: function (monthNum) {
        var self = this;
        self.state.setView(&#x27;month&#x27;, monthNum);
        self.dayPicker.updateView();
        self.changeView(&#x27;day&#x27;);
        return this;
    },
    /**
     * selectYear
     * @param {number} yearNum
     * @method selectYear
     * @return Datepicker
     */
    selectYear: function (yearNum) {
        var self = this;
        self.state.setView(&#x27;year&#x27;, yearNum);
        self.changeView(&#x27;month&#x27;);
        return this;
    },
    /**
     * _formatDigit
     * @param {number} digit
     * @private
     * @method _formatDigit
     * @return formatted Digit
     */
    _formatDigit: function (digit) {
        if (this.persianDigit &amp;&amp; digit)
            return digit.toString().toPersianDigit();
        else
            return digit;
    },
    /**
     * destroy instant of plugin and remove dom element
     * @method destroy
     * @return Datepicker
     */
    destroy: function () {
        this.inputElem.removeClass(self.cssClass);
        this.element.main.remove();
        return this;
    },
    /**
     * Sync Datepicker With Pasted Data
     * @method _syncWithImportData
     * @private
     * @return Datepicker
     */
    _syncWithImportData: function (pasted) {
        var self = this;
        if (jQuery.isNumeric(pasted)) {
            var newPersainDate = new persianDate(pasted);
            self.state.setSelected(&#x27;unix&#x27;, newPersainDate);
            self._updateInputElement();
        } else {
            var persianDateArray = self.validatePersianDateString(pasted);
            if (persianDateArray != null) {
                delay(function () {
                    var newPersainDate = new persianDate(persianDateArray);
                    self.selectDate(&#x27;unix&#x27;, newPersainDate.valueOf());
                }, self.inputDelay)
            }
        }
        return this;
    },
    /**
     * Bind Evenet
     * @method _attachEvents
     * @private
     * @return Datepicker
     */
    _attachEvents: function () {
        var self = this;
        $(window).resize(function () {
            self.view.fixPosition(self);
        });
        if (self.observer) {
            /////////////////   Manipulate by Copy And paste
            self.inputElem.bind(&#x27;paste&#x27;, function (e) {
                delay(function () {
                    self._syncWithImportData(e.target.value)
                }, 60);
            });
            /////////////////   Manipulate by alt changes
            $(self.altField).bind(&quot;change&quot;, function () {
                if (!self._flagSelfManipulate) {
                    var newDate = new Date($(this).val());
                    if (newDate != &quot;Invalid Date&quot;) {
                        var newPersainDate = new persianDate(newDate);
                        self.selectDate(&#x27;unix&#x27;, newPersainDate.valueOf());
                    }
                }
            });
            /////////////////   Manipulate by keyboard
            var ctrlDown = false;
            var ctrlKey = [17, 91], vKey = 86, cKey = 67;
            $(document).keydown(function (e) {
                if ($.inArray(e.keyCode, ctrlKey) &gt; 0)
                    ctrlDown = true;
            }).keyup(function (e) {
                if ($.inArray(e.keyCode, ctrlKey) &gt; 0)
                    ctrlDown = false;
            });
            self.inputElem.bind(&quot;keyup&quot;, function (e) {
                var $self = $(this);
                if (!self._flagSelfManipulate) {
                    var trueKey = false;
                    if (e.keyCode == 8 || e.keyCode &lt; 105 &amp;&amp; e.keyCode &gt; 96 || e.keyCode &lt; 58 &amp;&amp; e.keyCode &gt; 47 || (ctrlDown &amp;&amp; (e.keyCode == vKey || $.inArray(e.keyCode, ctrlKey) &gt; 0  ))) {
                        trueKey = true;
                    }
                    if (trueKey) {
                        self._syncWithImportData($self.val());
                    }
                }
            });
        }
        return this;
    },
    /**
     * Update Input Element
     * @method _updateInputElement
     * @private
     * @return Datepicker
     */
    _updateInputElement: function () {
        var self = this;
        self._flagSelfManipulate = true;
        // Update Alt Field
        $(self.altField).val(self.altFieldFormatter(self.state.selected.unixDate));
        // Update Display Field
        self.inputElem.val(self.formatter(self.state.selected.unixDate));
        self._flagSelfManipulate = false;
        return self;
    },
    /**
     * On Init Plugin run and define default date of datepicker
     * @method _defineOnInitState
     * @private
     * @return Datepicker
     */
    _defineOnInitState: function () {
        if (this.isValidGreguranDate(this.inputElem.val())) {
            this.state.unixDate = new Date(this.inputElem.val()).valueOf();
        }
        else {
            this.state.unixDate = new Date().valueOf();
        }
        this.state.setSelected(&#x27;unix&#x27;, this.state.unixDate);
        this.state.setView(&#x27;unix&#x27;, this.state.unixDate);
        return this;
    },
    /**
     * @property events
     * @type object
     */
    events: {},
    /**
     * @property _viewed
     * @type boolean
     * @default false
     * @private
     */
    _viewed: false,
    /**
     * Initilize Datepicler
     * @method init
     * @private
     * @return Datepicker
     */
    init: function () {
        var self = this;
        this.state = new State({datepicker: self});
        this._defineOnInitState();
        this._updateInputElement();
        this.view = this.views[&#x27;default&#x27;];
        this.view.render(this);
        this.inputElem.data(&quot;datepicker&quot;, this);
        this.inputElem.addClass(self.cssClass);
        this._attachEvents();
        return this;
    }
};
/**
 * My Datepicker Constructor
 *
 * @method Datepicker
 * @param [object] mainElem
 * @param [object] option
 */
var Datepicker = function (mainElem, options) {
    return inherit(this, [Class_Sprite, ClassDatepicker, ClassConfig, ViewsDatePicker, options, {
        inputElem: $(mainElem),
        inputAltElem: $(options.altField)
    }]);
};


    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
